<!DOCTYPE html>

<html>
    <head>
        <title>Salary Calculator</title>
    </head>

    <body>
        <h1>Salary Required for Home Loan</h1>
        <hr>

        <div id="calculator">
            <div id="home_cost">
                <label for="monthly_payment">
                    Monthly Mortgage Payments:</label>
                $<input type="number"
                    name="monthly_payment" id="monthly_payment"
                    min="1" step="100" value="1608.02">
                <br>

                <label for="home_price">Home Price:</label>
                $<input type="number" name="home_price" id="home_price"
                    min="1000" step="1000" value="240000"
                    onchange="update_mortgage()">
                <br>

                <label for="mortgage_rate">Mortgage Rate:</label>
                <input type="number"
                    name="mortgage_rate" id="mortgage_rate"
                    min=".01" step=".01" value="7.07"
                    onchange="update_mortgage()">%
                <br>

                <label for="term_in_years">Term in Years:</label>
                <input type="number"
                    name="term_in_years" id="term_in_years"
                    min="5" max="60" step="5" value="30"
                    onchange="update_mortgage()"> years
                <br>

                <label for="down_payment">Down Payment:</label>
                $<input type="number"
                    name="down_payment" id="down_payment"
                    min="0" max="240000" step="1000" value="0"
                    onchange="update_mortgage()">

                <script>
                    var monthly_payment = document.getElementById(
                        'monthly_payment');

                    var home_price = document.getElementById(
                        'home_price');
                    var mortgage_rate = document.getElementById(
                        'mortgage_rate');
                    var term_in_years = document.getElementById(
                        'term_in_years');
                    var down_payment = document.getElementById(
                        'down_payment');

                    // calculates monthly installments
                    function mortgage() {
                        let P = (
                            parseFloat(home_price.value)
                            - parseFloat(down_payment.value)
                        );
                        let r = (
                            parseFloat(mortgage_rate.value) * .01
                        ) / 12;
                        let n = parseFloat(term_in_years.value) * 12;

                        let M = P * (
                            (r * (1 + r) ** n)
                            /
                            ((1 + r) ** n - 1)
                        );

                        return M;
                    }

                    function update_mortgage() {
                        new_installments = mortgage().toFixed(2);
                        monthly_payment.value = new_installments;
                    }
                </script>
            </div>
            <hr>

            <div id="cost_of_living">

            </div>
            <hr>
            
            <div id="output">

            </div>
        </div>
    </body>
</html>